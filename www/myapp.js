(()=>{var e={400:(e,t,n)=>{e.exports=n(98)},98:e=>{var t=function(e){"use strict";var t,n=Object.prototype,i=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var r=t&&t.prototype instanceof v?t:v,o=Object.create(r.prototype),a=new I(i||[]);return o._invoke=function(e,t,n){var i=p;return function(r,o){if(i===h)throw new Error("Generator is already running");if(i===f){if("throw"===r)throw o;return T()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=j(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===p)throw i=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=h;var c=l(e,t,n);if("normal"===c.type){if(i=n.done?f:d,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=f,n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var p="suspendedStart",d="suspendedYield",h="executing",f="completed",m={};function v(){}function w(){}function g(){}var _={};c(_,o,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(C([])));y&&y!==n&&i.call(y,o)&&(_=y);var x=g.prototype=v.prototype=Object.create(_);function $(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(r,o,a,s){var c=l(e[r],e,o);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==typeof p&&i.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var r;this._invoke=function(e,i){function o(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(o,o):o()}}function j(e,n){var i=e.iterator[n.method];if(i===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,j(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=l(i,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,m;var o=r.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function C(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:T}}function T(){return{value:t,done:!0}}return w.prototype=g,c(x,"constructor",g),c(g,"constructor",w),w.displayName=c(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},$(k.prototype),c(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var a=new k(u(t,n,i,r),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},$(x),c(x,s,"Generator"),c(x,o,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=C,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(B),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(i,r){return s.type="throw",s.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),B(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;B(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:C(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},511:(e,t,n)=>{"use strict";n.d(t,{UT:()=>w,Dd:()=>b,iC:()=>d,Gr:()=>F});var i=n(146);function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var a=function(){},s=function(){function e(e){this.webixJet=!0,this.webix=e,this._events=[],this._subs={},this._data={}}var t=e.prototype;return t.getRoot=function(){return this._root},t.destructor=function(){this._detachEvents(),this._destroySubs(),this._events=this._container=this.app=this._parent=this._root=null},t.setParam=function(e,t,n){if(this._data[e]!==t&&(this._data[e]=t,this._segment.update(e,t,0),n))return this.show(null)},t.getParam=function(e,t){var n=this._data[e];if(void 0!==n||!t)return n;var i=this.getParentView();return i?i.getParam(e,t):void 0},t.getUrl=function(){return this._segment.suburl()},t.getUrlString=function(){return this._segment.toString()},t.getParentView=function(){return this._parent},t.$$=function(e){if("string"==typeof e){var t=this.getRoot();return t.queryView((function(n){return(n.config.id===e||n.config.localId===e)&&n.$scope===t.$scope}),"self")}return e},t.on=function(e,t,n){var i=e.attachEvent(t,n);return this._events.push({obj:e,id:i}),i},t.contains=function(e){for(var t in this._subs){var n=this._subs[t].view;if(n===e||n.contains(e))return!0}return!1},t.getSubView=function(e){var t=this.getSubViewInfo(e);if(t)return t.subview.view},t.getSubViewInfo=function(e){var t=this._subs[e||"default"];return t?{subview:t,parent:this}:"_top"===e?(this._subs[e]={url:"",id:null,popup:!0},this.getSubViewInfo(e)):this._parent?this._parent.getSubViewInfo(e):null},t._detachEvents=function(){for(var e=this._events,t=e.length-1;t>=0;t--)e[t].obj.detachEvent(e[t].id)},t._destroySubs=function(){for(var e in this._subs){var t=this._subs[e].view;t&&t.destructor()}this._subs={}},t._init_url_data=function(){var e=this._segment.current();this._data={},this.webix.extend(this._data,e.params,!0)},t._getDefaultSub=function(){if(this._subs.default)return this._subs.default;for(var e in this._subs){var t=this._subs[e];if(!t.branch&&t.view&&"_top"!==e){var n=t.view._getDefaultSub();if(n)return n}}},t._routed_view=function(){var e=this.getParentView();if(!e)return!0;var t=e._getDefaultSub();return!(!t&&t!==this)&&e._routed_view()},e}();function c(e){"/"===e[0]&&(e=e.substr(1));for(var t=e.split("/"),n=[],i=0;i<t.length;i++){var o=t[i],a={},s=o.indexOf(":");if(-1===s&&(s=o.indexOf("?")),-1!==s)for(var c,u=r(o.substr(s+1).split(/[\:\?\&]/g));!(c=u()).done;){var l=c.value.split("=");a[l[0]]=decodeURIComponent(l[1])}n[i]={page:s>-1?o.substr(0,s):o,params:a,isNew:!0}}return n}function u(e){for(var t,n=[],i=r(e);!(t=i()).done;){var o=t.value;n.push("/"+o.page);var a=l(o.params);a&&n.push("?"+a)}return n.join("")}function l(e){var t=[];for(var n in e)t.length&&t.push("&"),t.push(n+"="+encodeURIComponent(e[n]));return t.join("")}var p=function(){function e(e,t){this._next=1,this.route="string"==typeof e?{url:c(e),path:e}:e,this.index=t}var t=e.prototype;return t.current=function(){return this.route.url[this.index]},t.next=function(){return this.route.url[this.index+this._next]},t.suburl=function(){return this.route.url.slice(this.index)},t.shift=function(){return new e(this.route,this.index+this._next)},t.refresh=function(){for(var e=this.route.url,t=this.index+1;t<e.length;t++)e[t].isNew=!0},t.toString=function(){var e=u(this.suburl());return e?e.substr(1):""},t._join=function(e,t){var n=this.route.url;if(null===e)return n;var i=this.route.url;if(n=i.slice(0,this.index+(t?this._next:0)),e){n=n.concat(c(e));for(var r=0;r<n.length;r++)i[r]&&(n[r].view=i[r].view),i[r]&&n[r].page===i[r].page&&(n[r].isNew=!1)}return n},t.append=function(e){var t=this._join(e,!0);return this.route.path=u(t),this.route.url=t,this.route.path},t.show=function(e,t,n){var i=this,r=this._join(e,n);return new Promise((function(e,n){var o=u(r),s={url:r,redirect:o,confirm:Promise.resolve()},c=t?t.app:null;!c||c.callEvent("app:guard",[s.redirect,t,s])?s.confirm.catch((function(e){return n(e)})).then((function(){if(null!==s.redirect){if(s.redirect!==o)return c.show(s.redirect),void n(new a);i.route.path=o,i.route.url=r,e()}else n(new a)})):n(new a)}))},t.size=function(e){this._next=e},t.split=function(){var t={url:this.route.url.slice(this.index+1),path:""};return t.url.length&&(t.path=u(t.url)),new e(t,0)},t.update=function(e,t,n){var i=this.route.url[this.index+(n||0)];if(!i)return this.route.url.push({page:"",params:{}}),this.update(e,t,n);""===e?i.page=t:i.params[e]=t,this.route.path=u(this.route.url)},e}(),d=function(e){function t(t,n){var i;return(i=e.call(this,t.webix)||this).app=t,i._children=[],i}(0,i.Z)(t,e);var n=t.prototype;return n.ui=function(e,t){var n=(t=t||{}).container||e.container,i=this.app.createView(e);return this._children.push(i),i.render(n,this._segment,this),"object"!=typeof e||e instanceof s?i:i.getRoot()},n.show=function(e,t){if(t=t||{},"object"==typeof e){for(var n in e)this.setParam(n,e[n]);e=null}else{if("/"===e.substr(0,1))return this.app.show(e);if(0===e.indexOf("./")&&(e=e.substr(2)),0===e.indexOf("../")){var i=this.getParentView();return i?i.show(e.substr(3),t):this.app.show("/"+e.substr(3))}var r=this.getSubViewInfo(t.target);if(r){if(r.parent!==this)return r.parent.show(e,t);if(t.target&&"default"!==t.target)return this._renderFrameLock(t.target,r.subview,e)}else if(e)return this.app.show("/"+e)}return this._show(this._segment,e,this)},n._show=function(e,t,n){var i=this;return e.show(t,n,!0).then((function(){return i._init_url_data(),i._urlChange()})).then((function(){e.route.linkRouter&&(i.app.getRouter().set(e.route.path,{silent:!0}),i.app.callEvent("app:route",[e.route.path]))}))},n.init=function(e,t){},n.ready=function(e,t){},n.config=function(){this.app.webix.message("View:Config is not implemented")},n.urlChange=function(e,t){},n.destroy=function(){},n.destructor=function(){this.destroy(),this._destroyKids(),this._root.destructor(),e.prototype.destructor.call(this)},n.use=function(e,t){e(this.app,this,t)},n.refresh=function(){return this.getUrl(),this.destroy(),this._destroyKids(),this._destroySubs(),this._detachEvents(),this._container.tagName&&this._root.destructor(),this._segment.refresh(),this._render(this._segment)},n.render=function(e,t,n){var i=this;"string"==typeof t&&(t=new p(t,0)),this._segment=t,this._parent=n,this._init_url_data();var r="string"==typeof(e=e||document.body)?this.webix.toNode(e):e;return this._container!==r?(this._container=r,this._render(t)):this._urlChange().then((function(){return i.getRoot()}))},n._render=function(e){var t=this,n=this.config();return n.then?n.then((function(n){return t._render_final(n,e)})):this._render_final(n,e)},n._render_final=function(e,t){var n,i=this,r=null,o=null,a=!1;if(this._container.tagName?o=this._container:(r=this._container).popup?(o=document.body,a=!0):o=this.webix.$$(r.id),!this.app||!o)return Promise.reject(null);var s=this._segment.current(),c={ui:{}};this.app.copyConfig(e,c.ui,this._subs),this.app.callEvent("app:render",[this,t,c]),c.ui.$scope=this,!r&&s.isNew&&s.view&&s.view.destructor();try{if(r&&!a){var u=o,l=u.getParentView();l&&"multiview"===l.name&&!c.ui.id&&(c.ui.id=u.config.id)}this._root=this.app.webix.ui(c.ui,o);var p=this._root;a&&p.setPosition&&!p.isVisible()&&p.show(),r&&(r.view&&r.view!==this&&r.view!==this.app&&r.view.destructor(),r.id=this._root.config.id,this.getParentView()||!this.app.app?r.view=this:r.view=this.app),s.isNew&&(s.view=this,s.isNew=!1),n=Promise.resolve(this._init(this._root,t)).then((function(){return i._urlChange().then((function(){return i._initUrl=null,i.ready(i._root,t.suburl())}))}))}catch(e){n=Promise.reject(e)}return n.catch((function(e){return i._initError(i,e)}))},n._init=function(e,t){return this.init(e,t.suburl())},n._urlChange=function(){var e=this;this.app.callEvent("app:urlchange",[this,this._segment]);var t=[];for(var n in this._subs){var i=this._subs[n],r=this._renderFrameLock(n,i,null);r&&t.push(r)}return Promise.all(t).then((function(){return e.urlChange(e._root,e._segment.suburl())}))},n._renderFrameLock=function(e,t,n){if(!t.lock){var i=this._renderFrame(e,t,n);i&&(t.lock=i.then((function(){return t.lock=null}),(function(){return t.lock=null})))}return t.lock},n._renderFrame=function(e,t,n){var i=this;if("default"===e){if(this._segment.next())return this._createSubView(t,this._segment.shift());t.view&&t.popup&&(t.view.destructor(),t.view=null)}if(null!==n&&(t.url=n),t.route){if(null!==n)return t.route.show(n,t.view).then((function(){return i._createSubView(t,t.route)}));if(t.branch)return}var r=t.view;if(!r&&t.url){if("string"==typeof t.url)return t.route=new p(t.url,0),this._createSubView(t,t.route);"function"!=typeof t.url||r instanceof t.url||(r=new t.url(this.app,"")),r||(r=t.url)}if(r)return r.render(t,t.route||this._segment,this)},n._initError=function(e,t){return this.app&&this.app.error("app:error:initview",[t,e]),!0},n._createSubView=function(e,t){var n=this;return this.app.createFromURL(t.current()).then((function(i){return i.render(e,t,n)}))},n._destroyKids=function(){for(var e=this._children,t=e.length-1;t>=0;t--)e[t]&&e[t].destructor&&e[t].destructor();this._children=[]},t}(s),h=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this)._ui=n.ui,i}return(0,i.Z)(t,e),t.prototype.config=function(){return this._ui},t}(d),f=function(){function e(e,t,n){this.path="",this.app=n}var t=e.prototype;return t.set=function(e,t){this.path=e;var n=this.app;n.app.getRouter().set(n._segment.append(this.path),{silent:!0})},t.get=function(){return this.path},e}(),m=!0,v=function(e){function t(t){var n,i=(t||{}).webix||window.webix;return(n=e.call(this,i)||this).config=n.webix.extend({name:"App",version:"1.0",start:"/home"},t,!0),n.app=n.config.app,n.ready=Promise.resolve(),n._services={},n.webix.extend(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),n.webix.EventSystem),n}(0,i.Z)(t,e);var n=t.prototype;return n.getUrl=function(){return this._subSegment.suburl()},n.getUrlString=function(){return this._subSegment.toString()},n.getService=function(e){var t=this._services[e];return"function"==typeof t&&(t=this._services[e]=t(this)),t},n.setService=function(e,t){this._services[e]=t},n.destructor=function(){this.getSubView().destructor(),e.prototype.destructor.call(this)},n.copyConfig=function(e,t,n){if((e instanceof s||"function"==typeof e&&e.prototype instanceof s)&&(e={$subview:e}),void 0!==e.$subview)return this.addSubView(e,t,n);for(var i in t=t||(e instanceof Array?[]:{}),e){var r=e[i];if("function"==typeof r&&r.prototype instanceof s&&(r={$subview:r}),!r||"object"!=typeof r||r instanceof this.webix.DataCollection||r instanceof RegExp||r instanceof Map)t[i]=r;else if(r instanceof Date)t[i]=new Date(r);else{var o=this.copyConfig(r,r instanceof Array?[]:{},n);null!==o&&(t[i]=o)}}return t},n.getRouter=function(){return this.$router},n.clickHandler=function(e,t){if(e&&(t=t||e.target||e.srcElement)&&t.getAttribute){var n=t.getAttribute("trigger");if(n)return this._forView(t,(function(e){return e.app.trigger(n)})),e.cancelBubble=!0,e.preventDefault();var i=t.getAttribute("route");if(i)return this._forView(t,(function(e){return e.show(i)})),e.cancelBubble=!0,e.preventDefault()}var r=t.parentNode;r&&this.clickHandler(e,r)},n.getRoot=function(){return this.getSubView().getRoot()},n.refresh=function(){var e=this;return this._subSegment?this.getSubView().refresh().then((function(t){return e.callEvent("app:route",[e.getUrl()]),t})):Promise.resolve(null)},n.loadView=function(e){var t=this,n=this.config.views,i=null;if(""===e)return Promise.resolve(this._loadError("",new Error("Webix Jet: Empty url segment")));try{n&&"string"==typeof(i="function"==typeof n?n(e):n[e])&&(e=i,i=null),i||(i="_blank"===e?{}:this._loadViewDynamic(e))}catch(t){i=this._loadError(e,t)}return i.then||(i=Promise.resolve(i)),i.then((function(e){return e.__esModule?e.default:e})).catch((function(n){return t._loadError(e,n)}))},n._forView=function(e,t){var n=this.webix.$$(e);n&&t(n.$scope)},n._loadViewDynamic=function(e){return null},n.createFromURL=function(e){var t=this;return e.isNew||!e.view?this.loadView(e.page).then((function(e){return t.createView(e,name)})):Promise.resolve(e.view)},n.createView=function(e,n){if("function"==typeof e){if(e.prototype instanceof t)return new e({app:this,name:n,router:f});if(e.prototype instanceof s)return new e(this,{name:n});e=e(this)}return e instanceof s?e:new h(this,{name:n,ui:e})},n.show=function(e){return this.render(this._container,e||this.config.start)},n.trigger=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.apply(e,n)},n.apply=function(e,t){this.callEvent(e,t)},n.action=function(e){return this.webix.bind((function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];this.apply(e,n)}),this)},n.on=function(e,t){this.attachEvent(e,t)},n.use=function(e,t){e(this,null,t)},n.error=function(e,t){if(this.callEvent(e,t),this.callEvent("app:error",t),this.config.debug)for(var n=0;n<t.length;n++)if(console.error(t[n]),t[n]instanceof Error){var i=t[n].message;0===i.indexOf("Module build failed")?(i=i.replace(/\x1b\[[0-9;]*m/g,""),document.body.innerHTML="<pre style='font-size:16px; background-color: #ec6873; color: #000; padding:10px;'>"+i+"</pre>"):(i+="<br><br>Check console for more details",this.webix.message({type:"error",text:i,expire:-1}))}},n.render=function(e,t,n){var i=this;this._container="string"==typeof e?this.webix.toNode(e):e||document.body;var r=null;this.$router?r="string"==typeof t?t:this.app?t.split().route.path||this.config.start:t.toString():(m&&"tagName"in this._container&&(this.webix.event(document.body,"click",(function(e){return i.clickHandler(e)})),m=!1),"string"==typeof t&&(t=new p(t,0)),this._subSegment=this._first_start(t),this._subSegment.route.linkRouter=!0);var o=this.getSubView(),a=this._subSegment,s=a.show(r,o).then((function(){return i.createFromURL(a.current())})).then((function(t){return t.render(e,a)})).then((function(e){return i.$router.set(a.route.path,{silent:!0}),i.callEvent("app:route",[i.getUrl()]),e}));return this.ready=this.ready.then((function(){return s})),s},n.getSubView=function(){if(this._subSegment){var e=this._subSegment.current().view;if(e)return e}return new d(this,{})},n._first_start=function(e){var t=this;if(this._segment=e,this.$router=new this.config.router((function(e){return setTimeout((function(){t.show(e).catch((function(e){if(!(e instanceof a))throw e}))}),1)}),this.config,this),this._container===document.body&&!1!==this.config.animation){var n=this._container;this.webix.html.addCss(n,"webixappstart"),setTimeout((function(){t.webix.html.removeCss(n,"webixappstart"),t.webix.html.addCss(n,"webixapp")}),10)}if(e)this.app&&(e.current().view=this,e.next()?(e.refresh(),e=e.split()):e=new p(this.config.start,0));else{var i=this.$router.get();i||(i=this.config.start,this.$router.set(i,{silent:!0})),e=new p(i,0)}return e},n._loadError=function(e,t){return this.error("app:error:resolve",[t,e]),{template:" "}},n.addSubView=function(e,t,n){var i=!0!==e.$subview?e.$subview:null,r=e.name||(i?this.webix.uid():"default");return t.id=e.id||"s"+this.webix.uid(),(n[r]={id:t.id,url:i,branch:e.branch,popup:e.popup}).popup?null:t},t}(s),w=function(){function e(e,t){var n=this;this.config=t||{},this._detectPrefix(),this.cb=e,window.onpopstate=function(){return n.cb(n.get())}}var t=e.prototype;return t.set=function(e,t){var n=this;if(this.config.routes){var i=e.split("?",2);for(var r in this.config.routes)if(this.config.routes[r]===i[0]){e=r+(i.length>1?"?"+i[1]:"");break}}this.get()!==e&&window.history.pushState(null,null,this.prefix+this.sufix+e),t&&t.silent||setTimeout((function(){return n.cb(e)}),1)},t.get=function(){var e=this._getRaw().replace(this.prefix,"").replace(this.sufix,"");if(e="/"!==e&&"#"!==e?e:"",this.config.routes){var t=e.split("?",2),n=this.config.routes[t[0]];n&&(e=n+(t.length>1?"?"+t[1]:""))}return e},t._detectPrefix=function(){var e=this.config.routerPrefix;this.sufix="#"+(void 0===e?"!":e),this.prefix=document.location.href.split("#",2)[0]},t._getRaw=function(){return document.location.href},e}(),g=!1;function _(e){if(!g&&e){g=!0;var t=window;t.Promise||(t.Promise=e.promise);var n=e.version.split(".");10*n[0]+1*n[1]<53&&(e.ui.freeze=function(t){var n=t();return n&&n.then?n.then((function(t){return e.ui.$freeze=!1,e.ui.resize(),t})):(e.ui.$freeze=!1,e.ui.resize()),n});var i=e.ui.baselayout.prototype.addView,r=e.ui.baselayout.prototype.removeView,o={addView:function(e,t){var n=this;if(!this.$scope||!this.$scope.webixJet||e.queryView)return i.apply(this,arguments);var r=function(){var r=n.$scope,o={};e=r.app.copyConfig(e,{},o),i.apply(n,[e,t]);var a=function(e){r._renderFrame(e,o[e],null).then((function(){r._subs[e]=o[e]}))};for(var s in o)a(s);return{v:e.id}}();return"object"==typeof r?r.v:void 0},removeView:function(){if(r.apply(this,arguments),this.$scope&&this.$scope.webixJet){var t=this.$scope._subs;for(var n in t){var i=t[n];e.$$(i.id)||(i.view.destructor(),delete t[n])}}}};e.extend(e.ui.layout.prototype,o,!0),e.extend(e.ui.baselayout.prototype,o,!0),e.protoUI({name:"jetapp",$init:function(t){this.$app=new this.app(t);var n=e.uid().toString();for(var i in t.body={id:n},this.$ready.push((function(){this.$app.render({id:n})})),this.$app){var r=this.$app[i];"function"!=typeof r||this[i]||(this[i]=r.bind(this.$app))}}},e.ui.proxy)}}var b=function(e){function t(t){var n;return t.router=t.router||w,_((n=e.call(this,t)||this).webix),n}return(0,i.Z)(t,e),t.prototype._loadViewDynamic=function(e){return e=e.replace(/\./g,"/"),n(403)("./"+e)},t}(v);function y(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function x(e,t,n){for(var i in e)y(e,i)&&t.call(n||e,e[i],i,e)}function $(e){e="Warning: "+e,"undefined"!=typeof console&&console.error(e);try{throw new Error(e)}catch(e){}}var k=String.prototype.replace,j=String.prototype.split,S="||||",B=function(e){var t=e%10;return 11!==e&&1===t?0:2<=t&&t<=4&&!(e>=12&&e<=14)?1:2},I={arabic:function(e){if(e<3)return e;var t=e%100;return t>=3&&t<=10?3:t>=11?4:5},bosnian_serbian:B,chinese:function(){return 0},croatian:B,french:function(e){return e>1?1:0},german:function(e){return 1!==e?1:0},russian:B,lithuanian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=9&&(e%100<11||e%100>19)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){if(1===e)return 0;var t=e%10;return 2<=t&&t<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0},slovenian:function(e){var t=e%100;return 1===t?0:2===t?1:3===t||4===t?2:3}},C={arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is"],slovenian:["sl-SL"]};function T(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var P=/\$/g,E=/%\{(.*?)\}/g;function A(e,t,n,i){if("string"!=typeof e)throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==t)return e;var r,o=e,a=i||E,s="number"==typeof t?{smart_count:t}:t;if(null!=s.smart_count&&o){var c=j.call(o,S);r=c[function(e,t){return I[function(e){var t,n=(t={},x(C,(function(e,n){x(e,(function(e){t[e]=n}))})),t);return n[e]||n[j.call(e,/-/,1)[0]]||n.en}(e)](t)}(n||"en",s.smart_count)]||c[0],o=r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}return k.call(o,a,(function(e,t){return y(s,t)&&null!=s[t]?k.call(s[t],P,"$$"):e}))}function O(e){var t=e||{};this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en";var n=t.allowMissing?A:null;this.onMissingKey="function"==typeof t.onMissingKey?t.onMissingKey:n,this.warn=t.warn||$,this.tokenRegex=function(e){var t=e&&e.prefix||"%{",n=e&&e.suffix||"}";if(t===S||n===S)throw new RangeError('"||||" token is reserved for pluralization');return new RegExp(T(t)+"(.*?)"+T(n),"g")}(t.interpolation)}O.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},O.prototype.extend=function(e,t){x(e,(function(e,n){var i=t?t+"."+n:n;"object"==typeof e?this.extend(e,i):this.phrases[i]=e}),this)},O.prototype.unset=function(e,t){"string"==typeof e?delete this.phrases[e]:x(e,(function(e,n){var i=t?t+"."+n:n;"object"==typeof e?this.unset(e,i):delete this.phrases[i]}),this)},O.prototype.clear=function(){this.phrases={}},O.prototype.replace=function(e){this.clear(),this.extend(e)},O.prototype.t=function(e,t){var n,i,r=null==t?{}:t;return"string"==typeof this.phrases[e]?n=this.phrases[e]:"string"==typeof r._?n=r._:this.onMissingKey?i=(0,this.onMissingKey)(e,r,this.currentLocale,this.tokenRegex):(this.warn('Missing translation for key: "'+e+'"'),i=e),"string"==typeof n&&(i=A(n,r,this.currentLocale,this.tokenRegex)),i},O.prototype.has=function(e){return y(this.phrases,e)},O.transformPhrase=function(e,t,n){return A(e,t,n)};var V=O;function L(e,t,n){if(t.urls)n=t.urls[n]||n;else if(t.param){var i;(i={})[t.param]=n,n=i}e.show(n)}var z={good:"check",error:"warning",saving:"refresh fa-spin"},R={good:"Ok",error:"Error",saving:"Connecting..."};function D(e,t,n){for(var i=0;i<n.length;i++)e[n[i]]=t[i+1]?t[i+1].page:""}var U=window.webix;U&&_(U);var F={UnloadGuard:function(e,t,n){t.on(e,"app:guard",(function(e,i,r){if(i===t||i.contains(t)){var o=n();r.confirm=!1===o?Promise.reject(new a):r.confirm.then((function(){return o}))}}))},Locale:function(e,t,i){var r=(i=i||{}).storage,o=r?r.get("lang")||"en":i.lang||"en";function a(t,n,a){n.__esModule&&(n=n.default);var s={phrases:n};i.polyglot&&e.webix.extend(s,i.polyglot);var u=c.polyglot=new V(s);if(u.locale(t),c._=e.webix.bind(u.t,u),o=t,r&&r.put("lang",o),i.webix){var l=i.webix[t];l&&e.webix.i18n.setLocale(l)}return a?Promise.resolve():e.refresh()}function s(e,t){if(!1!==i.path){var r=(i.path?i.path+"/":"")+e;a(e,n(796)("./"+r),t)}}var c={getLang:function(){return o},setLang:s,setLangData:a,_:null,polyglot:null};e.setService("locale",c),s(o,!0)},Menu:function(e,t,n){var i=t.getSubViewInfo().parent,r=t.$$(n.id||n),o=!1;r.attachEvent("onchange",(function(){o||L(i,n,this.getValue())})),r.attachEvent("onafterselect",(function(){if(!o){var e=null;r.setValue?e=this.getValue():r.getSelectedId&&(e=r.getSelectedId()),L(i,n,e)}})),t.on(e,"app:route",(function(){var e="";if(n.param)e=t.getParam(n.param,!0);else{var a=i.getUrl()[1];a&&(e=a.page)}e&&(o=!0,r.setValue&&r.getValue()!==e?r.setValue(e):r.select&&r.exists(e)&&r.getSelectedId()!==e&&r.select(e),o=!1)}))},Theme:function(e,t,n){var i=(n=n||{}).storage,r=i?i.get("theme")||"flat-default":n.theme||"flat-default",o={getTheme:function(){return r},setTheme:function(t,n){for(var o=t.split("-"),a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var c=a[s].getAttribute("title");c&&(c===t||c===o[0]?a[s].disabled=!1:a[s].disabled=!0)}e.webix.skin.set(o[0]),e.webix.html.removeCss(document.body,"theme-"+r),e.webix.html.addCss(document.body,"theme-"+t),r=t,i&&i.put("theme",t),n||e.refresh()}};e.setService("theme",o),o.setTheme(r,!0)},User:function(e,t,n){var i=(n=n||{}).login||"/login",r=n.logout||"/logout",o=n.afterLogin||e.config.start,a=n.afterLogout||"/login",s=n.ping||3e5,c=n.model,u=n.user,l={getUser:function(){return u},getStatus:function(e){return e?c.status().catch((function(){return null})).then((function(e){u=e})):null!==u},login:function(t,n){return c.login(t,n).then((function(t){if(u=t,!t)throw new Error("Access denied");e.callEvent("app:user:login",[u]),e.show(o)}))},logout:function(){return u=null,c.logout().then((function(t){return e.callEvent("app:user:logout",[]),t}))}};function p(e,t){e===r?(l.logout(),t.redirect=a):e===i||l.getStatus()||(t.redirect=i)}e.setService("user",l),e.attachEvent("app:guard",(function(e,t,i){return!(!n.public||!n.public(e))||(void 0===u&&(i.confirm=l.getStatus(!0).then((function(){return p(e,i)}))),p(e,i))})),s&&setInterval((function(){return l.getStatus(!0)}),s)},Status:function(e,t,n){var i="good",r=0,o=!1,a=n.expire;a||!1===a||(a=2e3);var s=n.texts||R,c=n.icons||z;function u(e){var r=t.$$(n.target);r&&(e||(e="<div class='status_"+i+"'><span class='webix_icon fa-"+c[i]+"'></span> "+s[i]+"</div>"),r.setHTML(e))}function l(){r--,f("good")}function p(e){r--,f("error",e)}function d(e){r++,f("saving"),e&&e.then&&e.then(l,p)}function h(){0===r&&u(" ")}function f(t,n){r<0&&(r=0),"saving"===t?(i="saving",u()):(o="error"===t,0===r&&(i=o?"error":"good",o?e.error("app:error:server",[n.responseText||n]):a&&setTimeout(h,a),u()))}function m(n){var i=e.webix.dp(n);i&&(t.on(i,"onAfterDataSend",d),t.on(i,"onAfterSaveError",(function(e,t,n){return p(n)})),t.on(i,"onAfterSave",l))}"string"==typeof n&&(n={target:n}),e.setService("status",{getStatus:function(){return i},setStatus:f,track:m}),n.remote&&t.on(e.webix,"onRemoteCall",d),n.ajax&&t.on(e.webix,"onBeforeAjax",(function(e,t,n,i,r,o,a){d(a)})),n.data&&m(n.data)},UrlParam:function(e,t,n){var i=n.route||n,r={};t.on(e,"app:urlchange",(function(e,n){t===e&&(D(r,n.suburl(),i),n.size(i.length+1))}));var o=t.setParam,a=t.getParam;t.setParam=function(e,n,a){var s=i.indexOf(e);return s>=0?(r[e]=n,this._segment.update("",n,s+1),a?t.show(null):void 0):o.call(this,e,n,a)},t.getParam=function(e,t){var n=r[e];return void 0!==n?n:a.call(this,e,t)},D(r,t.getUrl(),i)}},N=window;N.Promise||(N.Promise=N.webix.promise)},575:(e,t,n)=>{"use strict";n.d(t,{z0:()=>i,T5:()=>r,et:()=>o,B$:()=>a,Yy:()=>s});var i="http://localhost/kanboard",r=i+"/jsonrpc.php",o="zkanboard_",a=o+"token",s=o+"auth"},104:(e,t,n)=>{"use strict";function i(){return{"Content-Type":"application/json"}}n.d(t,{z:()=>i})},92:(e,t,n)=>{"use strict";function i(e){var t=new Date(1e3*e);return("0"+t.getDate()).slice(-2)+"/"+("0"+(t.getMonth()+1)).slice(-2)+"/"+t.getFullYear()+" "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)}n.d(t,{OT:()=>i,tE:()=>r});var r=function(){return window.screen.width>700?"wide":"small"}},194:()=>{},794:(e,t,n)=>{"use strict";n.d(t,{SB:()=>o,dR:()=>a,Yr:()=>s,uA:()=>c,PN:()=>u});var i=n(575),r=n(724),o={prefix:i.et+"comment",isEdit:!1,dataSelected:{},dataComments:[],selId:null};function a(e){var t={jsonrpc:"2.0",method:"getAllComments",id:148484683,params:{task_id:e}};return webix.ajax().headers({"Content-Type":"application/json",Authorization:"Basic "+(0,r.aI)()}).post(i.T5,t).then((function(e){return e.json().result}))}function s(e,t,n){var o={jsonrpc:"2.0",method:"createComment",id:1580417921,params:{task_id:e,user_id:t,content:n}};return webix.ajax().headers({"Content-Type":"application/json",Authorization:"Basic "+(0,r.aI)()}).post(i.T5,o).then((function(e){return e.json().result}))}function c(e,t){var n={jsonrpc:"2.0",method:"updateComment",id:496470023,params:{id:e,content:t}};return webix.ajax().headers({"Content-Type":"application/json",Authorization:"Basic "+(0,r.aI)()}).post(i.T5,n).then((function(e){return e.json().result}))}function u(e){var t={jsonrpc:"2.0",method:"removeComment",id:328836871,params:{comment_id:e}};return webix.ajax().headers({"Content-Type":"application/json",Authorization:"Basic "+(0,r.aI)()}).post(i.T5,t).then((function(e){return e.json().result}))}i.T5},977:(e,t,n)=>{"use strict";n.d(t,{SB:()=>a,HQ:()=>s,Rr:()=>c,Rp:()=>u});var i=n(575),r=n(724),o="project",a={prefix:i.et+o,isEdit:!1,dataSelected:{},selId:null},s=i.T5+"/"+o;function c(){return webix.ajax().headers({"Content-Type":"application/json",Authorization:"Basic "+(0,r.aI)()}).post(i.T5,{jsonrpc:"2.0",method:"getmyProjects",id:2134420212}).then((function(e){return e.json().result}))}function u(e){var t={jsonrpc:"2.0",method:"getProjectById",id:226760253,params:{project_id:e}};return webix.ajax().headers({"Content-Type":"application/json",Authorization:"Basic "+(0,r.aI)()}).post(i.T5,t).then((function(e){return e.json().result}))}},615:(e,t,n)=>{"use strict";n.d(t,{SB:()=>a,HQ:()=>s,xH:()=>c,vr:()=>u,xJ:()=>l,Q_:()=>p,yW:()=>d,I2:()=>h,$o:()=>f,Yd:()=>m,IY:()=>v,i3:()=>w});var i=n(575),r=n(724),o="task",a={prefix:i.et+o,isEdit:!1,dataSelected:{},dataSelectedProject:{},selId:null,selTaskId:null,routePath:"",images:[],imageView:[],fileNameUpload:"",attachOpen:0},s=i.T5+"/"+o;function c(e){var t={jsonrpc:"2.0",method:"getColumns",id:887036325,params:[e]};return webix.ajax().headers({"Content-Type":"application/json",Authorization:"Basic "+(0,r.aI)()}).post(i.T5,t).then((function(e){return e.json().result[0]}))}function u(e,t,n,o,a){var s={jsonrpc:"2.0",method:"createTask",id:1176509098,params:{owner_id:n,creator_id:n,date_due:"",description:a,category_id:0,score:0,title:o,project_id:e,color_id:"green",column_id:t,recurrence_status:0,recurrence_trigger:0,recurrence_factor:0,recurrence_timeframe:0,recurrence_basedate:0}};return webix.ajax().headers({"Content-Type":"application/json",Authorization:"Basic "+(0,r.aI)()}).post(i.T5,s).then((function(e){return e.json().result}))}function l(e,t,n){var o={jsonrpc:"2.0",method:"updateTask",id:1406803059,params:{id:e,title:t,description:n}};return webix.ajax().headers({"Content-Type":"application/json",Authorization:"Basic "+(0,r.aI)()}).post(i.T5,o).then((function(e){return e.json().result}))}function p(e){var t={jsonrpc:"2.0",method:"getAllTasks",id:133280317,params:{project_id:e,status_id:1}};return webix.ajax().headers({"Content-Type":"application/json",Authorization:"Basic "+(0,r.aI)()}).post(i.T5,t).then((function(e){return e.json().result}))}function d(e){var t={jsonrpc:"2.0",method:"getTask",id:700738119,params:{task_id:e}};return webix.ajax().headers({"Content-Type":"application/json",Authorization:"Basic "+(0,r.aI)()}).post(i.T5,t).then((function(e){return e.json().result}))}function h(e){var t={jsonrpc:"2.0",method:"getAllTaskFiles",id:1880662820,params:{task_id:e}};return webix.ajax().headers({"Content-Type":"application/json",Authorization:"Basic "+(0,r.aI)()}).post(i.T5,t).then((function(e){return e.json().result}))}function f(e,t,n,o){var a={jsonrpc:"2.0",method:"createTaskFile",id:94500810,params:[e,t,n,o]};return webix.ajax().headers({"Content-Type":"application/json",Authorization:"Basic "+(0,r.aI)()}).post(i.T5,a).then((function(e){return e.json().result}))}function m(e){var t={jsonrpc:"2.0",method:"removeTaskFile",id:447036524,params:[e]};return webix.ajax().headers({"Content-Type":"application/json",Authorization:"Basic "+(0,r.aI)()}).post(i.T5,t).then((function(e){return e.json().result}))}function v(e){return'<img src="'+i.z0+"/data/files/"+e.path+"?"+Date.now()+'" class="photo_content" ondragstart="return false"/>'}function w(e){return'<img src="'+i.z0+"/data/files/thumbnails/"+e.path+"?"+Date.now()+'" class="photo_content" ondragstart="return false"/>'}},724:(e,t,n)=>{"use strict";n.d(t,{DY:()=>r,aI:()=>o,$l:()=>a});var i=n(575),r=(n(603),{userId:0,authEncoded:"",username:"",fullname:"",email:""}),o=function(){return r.authEncoded||webix.storage.cookie.get(i.Yy)},a=function(e,t){webix.storage.cookie.put(i.Yy,t),t&&e?(r.userEncoded=t,r.username=e.username,r.fullname=e.name,r.email=e.email,r.userId=e.id):r={}}},603:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(575),r=n(724);function o(e){return webix.ajax().headers({"Content-Type":"application/json",Authorization:"Basic "+e}).post(i.T5,{jsonrpc:"2.0",method:"getMe",id:1718627783}).then((function(e){return e.json()}))}const a={status:function(){return o((0,r.aI)()).then((function(e){return void 0!==e.result&&(0,r.$l)(e.result,(0,r.aI)()),e.id}))},login:function(e,t){var n=e+":"+t,i=window.btoa(n);return o(i).then((function(e){return(0,r.$l)(e.result,i),e.result}))},logout:function(){return new Promise((function(e,t){webix.storage.cookie.remove(i.Yy),webix.storage.cookie.remove(i.B$),e(!0)}))}}},469:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var i=n(146),r=n(511),o=n(977),a=n(491),s=function(e){function t(){return e.apply(this,arguments)||this}(0,i.Z)(t,e);var n=t.prototype;return n.config=function(){return{type:"clean",paddingX:5,css:"app_layout",cols:[{width:250,rows:[{css:"webix_shadow_medium",rows:[{view:"toolbar",height:42,cols:[{view:"icon",icon:"mdi mdi-account-circle-outline",click:function(){}},{view:"template",type:"clean",css:"z_app_name_tmpl",template:"<span class='z_app_name_title'>"+this.app.config.name+"</span>"},{view:"icon",icon:"mdi mdi-dots-vertical",click:function(){this.$scope.ui(a.ProfileWindow).show()}}]},{view:"list",id:"app:myproject",css:"app_menu",layout:"y",select:!0,template:"#name# ",on:{onItemClick:function(e,t,n){this.getItem(e),this.$scope.show("/app/p.project?project_id="+e)},onAfterSelect:function(e){}}}]}]},{view:"resizer",css:"z_content_ver_resizer"},{css:"z_content_ver_border",rows:[{$subview:!0}]}]}},n.init=function(){},n.urlChange=function(e,t){},n.ready=function(e,t){var n=this;(0,o.Rr)().then((function(e){n.$$("app:myproject").clearAll(),n.$$("app:myproject").parse(e);var i=t.find((function(e){return e.params.project_id}));i&&(o.SB.selId=i.params.project_id,n.$$("app:myproject").select(o.SB.selId))})),webix.event(window,"resize",(function(e){}))},t}(r.iC)},401:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var i=n(146),r=n(511),o=n(92),a=function(e){function t(){return e.apply(this,arguments)||this}(0,i.Z)(t,e);var n=t.prototype;return n.config=function(){var e=this;webix.ui.fullScreen();var t={view:"form",localId:"login:form",width:400,borderless:!1,margin:10,rows:[{view:"text",name:"login",label:"User Name",labelPosition:"top",value:"arifin2"},{view:"text",type:"password",name:"pass",label:"Password",labelPosition:"top",value:"arifin123"},{view:"button",value:"Login",click:function(){return e.do_login()},hotkey:"enter"}],rules:{login:webix.rules.isNotEmpty,pass:webix.rules.isNotEmpty}},n={view:"form",localId:"login:form",borderless:!1,margin:10,rows:[{view:"text",name:"login",label:"User Name",labelPosition:"top",value:"arifin2"},{view:"text",type:"password",name:"pass",label:"Password",labelPosition:"top",value:"arifin123"},{view:"button",value:"Login",click:function(){return e.do_login()},hotkey:"enter"}],rules:{login:webix.rules.isNotEmpty,pass:webix.rules.isNotEmpty}},i={cols:[{},{localId:"login:top",rows:[{},{type:"header",template:this.app.config.name,css:"webix_dark"},t,{}]},{}]},r={rows:[{},{type:"header",template:this.app.config.name,css:"webix_dark"},n,{}]};return"wide"==(0,o.tE)()?i:r},n.init=function(e){e.$view.querySelector("input").focus()},n.do_login=function(){var e=this.app.getService("user"),t=this.$$("login:form"),n=this.$$("login:top");if(t.validate()){var i=t.getValues();e.login(i.login,i.pass).catch((function(){webix.html.removeCss(n.$view,"invalid_login"),t.elements.pass.focus(),webix.delay((function(){webix.html.addCss(n.$view,"invalid_login")}))}))}},t}(r.iC)},350:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ProjectFormMobile:()=>u});var i=n(146),r=n(511),o=n(104),a=n(977),s=a.SB.prefix;function c(){$$(s+"_form").clear(),$$(s+"_win").destructor()}var u=function(e){function t(){return e.apply(this,arguments)||this}(0,i.Z)(t,e);var n=t.prototype;return n.config=function(){return e=a.SB.isEdit,{view:"window",modal:!0,id:s+"_win",position:"center",move:!0,head:{height:38,template:"New Project"},body:{rows:[{padding:10,view:"form",id:s+"_form",width:485,type:"clean",elements:[{view:"text",placeholder:"Project Name",name:"project_name",id:s+"_project_name"}],rules:{project_name:webix.rules.isNotEmpty},on:{onAfterValidation:function(e,t){if(!e){var n=[];for(var i in t)"project_name"==i&&n.push("Project Name can't be empty");webix.message({type:"error",text:n.join("<br>")})}}},elementsConfig:{labelPosition:"left",labelWidth:125,bottomPadding:1}},{view:"toolbar",elements:[{},{view:"button",label:e?"Update":"Save",autowidth:!0,click:function(){var e,t;$$(s+"_form").validate()&&(e=$$(s+"_form").getValues(),t=e.project_name,a.SB.isEdit?webix.ajax().headers((0,o.z)()).put(a.HQ+"/"+data.id,e,(function(e){webix.message({text:"<b>"+t+"</b> updated."}),reload()})).fail((function(e){showError(e)})):webix.ajax().post(a.HQ,e,(function(e){webix.message({text:"<b>"+t+"</b> saved."}),reload()})).fail((function(e){showError(e)})),c())}},{view:"button",value:"Close",autowidth:!0,click:function(){c()}}]}]},on:{onShow:function(){$$(s+"_project_name").focus()}}};var e},n.show=function(e){this.getRoot().show(e)},n.init=function(e){},n.ready=function(e){a.SB.isEdit?loadDataToForm():$$(s+"_form").clear()},t}(r.iC)},636:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var i=n(108),r=n(146),o=n(400),a=n.n(o),s=n(511),c=n(977),u=(n(615),c.SB+"_page_"),l=function(e){function t(){return e.apply(this,arguments)||this}(0,r.Z)(t,e);var n=t.prototype;return n.config=function(){return{rows:[{view:"toolbar",elements:[{width:10},{view:"label",label:"App",id:"mobile_navbar"},{}]},{view:"datatable",id:u+"table",select:"row",header:!1,scrollX:!1,rowHeight:50,columns:[{id:"name",fillspace:!0}],on:{onItemClick:function(e,t){this.$scope.show("/mobile/m.task?project_id="+e.row),c.SB.selId=e.row}}}]}},n.init=function(e){},n.urlChange=function(){var e=(0,i.Z)(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.ready=function(){var e=(0,i.Z)(a().mark((function e(t,n){var i,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.Rr)();case 2:i=e.sent,(r=$$(u+"table")).clearAll(),r.parse(i);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t}(s.iC)},974:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i={template:"Report page"}},51:(e,t,n)=>{"use strict";n.r(t),n.d(t,{TaskAttachScreenshot:()=>g});var i=n(146),r=n(108),o=n(400),a=n.n(o),s=n(511),c=n(615);n(977);var u,l,p=n(92),d=c.SB.prefix+"_attachscreen_",h=c.SB.prefix+"_detail_",f=!1;function m(){return v.apply(this,arguments)}function v(){return(v=(0,r.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=document.querySelector("#video"),l=document.querySelector("#camera_canvas"),!navigator.mediaDevices){e.next=9;break}return e.next=5,navigator.mediaDevices.getUserMedia({video:{facingMode:f?"user":"environment"},audio:!1});case 5:t=e.sent,u.srcObject=t,e.next=10;break;case 9:webix.alert({type:"alert-error",title:"Camera",text:"Camera can not open, mediaDevices not detect"});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){if(void 0!==u){var e=u.srcObject;if(console.log("mediaStream",e),e){var t=e.getTracks();t.length>0&&t[0].stop()}}}var g=function(e){function t(){return e.apply(this,arguments)||this}(0,i.Z)(t,e);var n=t.prototype;return n.config=function(){return{view:"window",position:"center",modal:!0,move:!0,id:e=d+"win",width:500,height:400,fullscreen:"small"==(0,p.tE)(),head:{view:"toolbar",cols:[{width:4},{view:"label",label:"Attach Screenshot"},{view:"icon",icon:"mdi mdi-close",tooltip:"Close Me",align:"right",click:function(){w(),$$(e).close()}}]},body:{rows:[{id:d+"file_tmpl",rows:[{css:"img_screenshot_empty_tmpl",cols:[{view:"uploader",value:"Open file",accept:"image/jpeg, image/png, image/jpg",autosend:!1,multiple:!1,id:d+"_open_uploader",autowidth:!0,upload:c.HQ+"/test",on:{onBeforeFileAdd:function(e){if(e.size&&e.size>4e6)return webix.message({text:"Image too big,  4MB limit size",type:"error"}),!1},onAfterFileAdd:function(t){var n=t.file,i=new FileReader;return i.onload=function(t){var n=document.getElementById("img_screenshot");n.style.backgroundImage="url("+t.target.result+")",n.style.backgroundRepeat="no-repeat",n.style.backgroundPosition="center",n.style.backgroundSize="contain",n.style.width="100%",n.style.height="100%",$$("form_photo").setValue(t.target.result),$$(e).close(),$$(h+"file_view_panel").show(),$$(h+"file_attach_panel").show()},c.SB.fileNameUpload=Object.values($$(d+"_open_uploader").files.data.pull)[0].name,i.readAsDataURL(n),!1}}},{type:"clean",template:'<p id="img_screenshot_empty"> or paste your image below here…</p>'}]},{template:'\n              <img id="img_screenshot"/>\n              '}]},{id:d+"camera_tmpl",hidden:!0,template:'\n          <div class=\'camera_attach_container\'>\n          <video id="video" width="100%" height="100%" autoplay></video>\n          <canvas id="camera_canvas" width="320" height="240"></canvas>\n          <div>\n          '},{cols:[{},{view:"button",type:"icon",icon:"mdi mdi-file",autowidth:!0,tooltip:"Use file",hidden:!0,id:d+"use_file",click:function(){$$(d+"camera_tmpl").hide(),$$(d+"file_tmpl").show(),$$(d+"camera_start").show(),$$(d+"camera_capture").hide(),$$(d+"camera_frontback").hide(),$$(d+"use_file").hide(),w(),this.hide()}},{view:"button",id:d+"camera_start",type:"icon",icon:"mdi mdi-camera",tooltip:"Use Camera",autowidth:!0,click:function(){$$(d+"file_tmpl")&&$$(d+"file_tmpl").hide(),$$(d+"camera_tmpl").show(),$$(d+"camera_capture").show(),$$(d+"camera_frontback").show(),$$(d+"use_file").show(),m(),this.hide()},css:{"padding-left":"10px","padding-right":"10px"}},{view:"button",type:"icon",icon:"mdi mdi-camera-iris",css:"capture_camera",autowidth:!0,tooltip:"Capture Camera",hidden:!0,id:d+"camera_capture",click:function(){!function(){l.getContext("2d").drawImage(u,0,0,l.width,l.height);var e=l.toDataURL("image/png");$$("form_photo").setValue(e),$$(h+"file_view_panel").show(),$$(h+"file_attach_panel").show()}(),$$(e).close()}},{view:"button",type:"icon",icon:"mdi mdi-camera-flip",autowidth:!0,tooltip:"Camera "+(f?"Back":"Front"),hidden:!0,id:d+"camera_frontback",click:function(){f=!f,w(),m()}},{}]}]},on:{onShow:function(){document.onpaste=function(t){var n=t.clipboardData.items[0];if(0===n.type.indexOf("image")){var i=n.getAsFile(),r=new FileReader;r.onload=function(t){document.getElementById("img_screenshot").src=t.target.result,$$("form_photo").setValue(t.target.result),$$(h+"file_view_panel").show(),$$(h+"file_attach_panel").show(),$$(e).close()},r.readAsDataURL(i)}};var t=function(e,t,n){var i=null,r="",o=window.location.href.split("?"),a=o[0],s=o[1],c="";if(s){var u=s.split("#"),l=u[0];(i=u[1])&&(s=l),o=s.split("&");for(var p=0;p<o.length;p++)o[p].split("=")[0]!=t&&(r+=c+o[p],c="&")}else{var d=a.split("#"),h=d[0];i=d[1],h&&(a=h)}return i&&(n+="#"+i),a+"?"+r+c+"attach="+n}(0,"attach","1");window.history.replaceState("","",t)},onDestruct:function(){var e=function(e,t){var n=t.split("?")[0],i=[],r=-1!==t.indexOf("?")?t.split("?")[1]:"";if(""!==r){for(var o=(i=r.split("&")).length-1;o>=0;o-=1)"attach"===i[o].split("=")[0]&&i.splice(o,1);n=n+"?"+i.join("&")}return n}(0,window.location.href);window.history.replaceState("","",e),w()}}};var e},n.show=function(e){this.getRoot().show(e)},n.init=function(e){},n.ready=function(e){},t}(s.iC)},158:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var i=n(146),r=n(108),o=n(400),a=n.n(o),s=n(511),c=n(615),u=n(977),l=n(724),p=c.SB.prefix;function d(e){var t="p.task.add"==c.SB.routePath?"p.project?project_id="+u.SB.selId:"p.task?project_id="+u.SB.selId+"&id="+c.SB.selId;e.show(t)}function h(){return(h=(0,r.Z)(a().mark((function e(t,n){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$$(p+"_form").getValues(),e.next=3,(0,c.xJ)(n,i.title,i.description);case 3:e.sent&&(webix.message({text:"Task updated",type:"success"}),d(t));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=(0,r.Z)(a().mark((function e(t){var n,i,r,o,s,h;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$$(p+"_form").getValues(),i=u.SB.selId,e.next=4,(0,c.xH)(i);case 4:return r=e.sent,e.next=7,(0,c.vr)(i,r.id,l.DY.userId,n.title,n.description);case 7:if(o=e.sent,!n.photo){e.next=19;break}return s=n.photo,h=Object.values($$(p+"_open_uploader").files.data.pull)[0].name,s=(s=s.replace("data:image/png;base64,","")).replace(" ","+"),e.next=15,(0,c.$o)(u.SB.selId,o,h,s);case 15:e.sent?(webix.message({text:"Task created, uploaded",type:"success"}),d(t)):webix.message({text:"Task fail save, upload",type:"error"}),e.next=20;break;case 19:o?(webix.message({text:"Task created",type:"success"}),d(t)):webix.message({text:"Task fail to save",type:"success"});case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=function(e){function t(){return e.apply(this,arguments)||this}(0,i.Z)(t,e);var n=t.prototype;return n.config=function(){var e=this,t={view:"toolbar",elements:[{width:10},{view:"icon",icon:"mdi mdi-arrow-left",click:function(){d(e)}},{view:"label",label:" Task",id:p+"_navbar"},{}]},n={padding:10,view:"form",id:p+"_form",type:"clean",elements:[{view:"text",label:"Title",name:"title",id:p+"_title"},{view:"textarea",label:"Description",name:"description",id:p+"_description",height:100},{id:p+"form_photo_panel",cols:[{rows:[{css:"photo_panel",rows:[{view:"photo",name:"photo",css:"form_photo",id:"form_photo",borderless:!1,width:120,height:65},{css:"photo_panel_spacer",cols:[{},{view:"uploader",value:"Open file",accept:"image/jpeg, image/png, image/jpg",autosend:!1,multiple:!1,id:p+"_open_uploader",autowidth:!0,upload:c.HQ+"/test",on:{onBeforeFileAdd:function(e){if(e.size&&e.size>4e6)return webix.message({text:"Image too big,  4MB limit size",type:"error"}),!1},onAfterFileAdd:function(e){var t=e.file,n=new FileReader;return n.onload=function(e){$$("form_photo").setValue(e.target.result)},n.readAsDataURL(t),$$(p+"_open_uploader").hide(),$$(p+"_cancel_file").show(),!1}}},{view:"button",value:"Upload",id:p+"_do_uploader",css:"webix_warning",hidden:!0,autowidth:!0,click:function(){var e=$$("form_photo").getValue(),t=Object.values($$(p+"_open_uploader").files.data.pull)[0].name;e=(e=e.replace("data:image/png;base64,","")).replace(" ","+"),(0,c.$o)(u.SB.selId,c.SB.selId,t,e).then((function(e){webix.message({text:"Upload success",type:"success"})}))}},{view:"button",type:"icon",icon:"mdi mdi-close",id:p+"_cancel_file",autowidth:!0,hidden:!0,click:function(){$$("form_photo").setValue(),$$(p+"_open_uploader").show(),this.hide()}},{}]}]}]},{}]},{},{view:"button",label:"Submit",css:"webix_primary",click:function(){"p.task.edit"==c.SB.routePath&&void 0!==c.SB.selId?function(e,t){h.apply(this,arguments)}(this.$scope,c.SB.selId):function(e){f.apply(this,arguments)}(this.$scope)}}],rules:{description:webix.rules.isNotEmpty},on:{onAfterValidation:function(e,t){if(!e){var n=[];for(var i in t)"description"==i&&n.push("Description can't be empty");webix.message({type:"error",text:n.join("<br>")})}}},elementsConfig:{labelPosition:"top",bottomPadding:1}};return{rows:[t,n]}},n.init=function(e){},n.urlChange=function(e,t){c.SB.selId=t[0].params.id,u.SB.selId=t[0].params.project_id},n.ready=function(e,t){var n=this;c.SB.selId=t[0].params.id,u.SB.selId=t[0].params.project_id,c.SB.routePath=t[0].page;var i="";"p.task.add"==c.SB.routePath?(i="Add",$$(p+"form_photo_panel").show()):"p.task.edit"==c.SB.routePath&&void 0!==c.SB.selId?(i="Edit",$$(p+"form_photo_panel").hide(),(0,c.yW)(c.SB.selId).then((function(e){return n.$$(p+"_form").setValues(e)}))):"p.task.editmore"==c.SB.routePath&&(i="Edit more",$$(p+"form_photo_panel").show()),this.$$(p+"_navbar").setValue(i)},t}(s.iC)},962:(e,t,n)=>{"use strict";n.r(t),n.d(t,{TaskPhotoPreview:()=>s});var i=n(146),r=n(511),o=n(615),a=o.SB.prefix+"_img_preview_",s=function(e){function t(){return e.apply(this,arguments)||this}(0,i.Z)(t,e);var n=t.prototype;return n.config=function(){return{view:"window",id:e=a+"win",head:{view:"toolbar",cols:[{width:4},{view:"label",label:"Image View"},{view:"icon",icon:"mdi mdi-close",tooltip:"Close Me",align:"right",click:function(){$$(e).close()}}]},body:{id:"photo_panel_body",rows:[{view:"carousel",id:"carousel",cols:o.SB.imageView,navigation:{type:"side",items:!1},on:{onShow:function(e){}}},{view:"dataview",id:"imageList",css:"nav_list",yCount:1,select:!0,scroll:!1,type:{width:100,height:65},template:o.i3,data:o.SB.images}]},fullscreen:!0,on:{onShow:function(){$$("imageList").select(o.SB.images[0].id)}}};var e},n.show=function(e){this.getRoot().show(e)},n.init=function(e){},n.ready=function(e){$$("imageList").attachEvent("onItemClick",(function(e){$$(e).show()})),$$("carousel").attachEvent("onShow",(function(e){$$("imageList").select(e)}))},t}(r.iC)},402:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i=n(158).default},939:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>$});var i=n(146),r=n(108),o=n(400),a=n.n(o),s=n(511),c=n(615),u=n(977),l=n(575),p=n(92),d=n(794),h=n(51),f=n(962),m=n(724),v=c.SB.prefix+"_detail_",w=c.SB.prefix+"_attachscreen_";function g(){return _.apply(this,arguments)}function _(){return(_=(0,r.Z)(a().mark((function e(){var t,n,i,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.I2)(c.SB.selId);case 2:if(t=e.sent,n=$$(v+"file_view"),t.length>0){for($$(v+"file_view_empty").hide(),$$(v+"file_view_panel").show(),$$(v+"file_view").show(),n.clearAll(),n.parse(t),c.SB.images=t,i=[],r=0;r<t.length;r++)i.push({id:t[r].id,css:"image",template:c.IY,data:webix.copy(t[r])});c.SB.imageView=i}else $$(v+"file_view_empty").show(),$$(v+"file_view_panel").hide(),$$(v+"file_view").hide();return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){var e=$$(v+"comment_view_panel"),t=e.getNode().querySelector("textarea");t.value="",$$(v+"comment_submit_panel").hide(),t.style.height="40px",e.refresh(),d.SB.dataSelected={}}function y(){return x.apply(this,arguments)}function x(){return(x=(0,r.Z)(a().mark((function e(){var t,n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.dR)(c.SB.selId);case 2:t=e.sent,n=$$(v+"comment_list"),d.SB.dataComments=t,i="",t.forEach((function(e){i+="<div class='comment_list_panel'>"+e.name+" <span style='color:grey'>create at: "+(0,p.OT)(e.date_creation)+" update at: "+(0,p.OT)(e.date_modification)+"</span><br>\n    <div class='comment_list_msg'><span class='comment_msg'>"+e.comment+"</span>\n    <span class='action-icon'>\n      <span class='webix_icon mdi mdi-pencil update-icon' title='Update' data-comment_id="+e.id+"></span>\n      <span class='webix_icon mdi mdi-close remove-icon' title='Delete' data-comment_id="+e.id+"></span>\n    </span>\n    </div>\n    </div>"})),n.setHTML(i),setTimeout((function(){return n.scrollTo(0,1e3)}),300);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $=function(e){function t(){return e.apply(this,arguments)||this}(0,i.Z)(t,e);var n=t.prototype;return n.config=function(){var e=this;return{rows:[{view:"toolbar",elements:[{width:10},{view:"icon",icon:"mdi mdi-arrow-left",click:function(){var t,n;t=e,n="m.task?project_id="+u.SB.selId,t.show(n)}},{view:"label",label:" Task",id:v+"navbar"},{}]},{rows:[{view:"template",id:v+"task_view",autoheight:!0,template:function(e){return 0!==Object.keys(e).length&&e.constructor===Object?"<div class='task_view_template' style='background:"+e.color.background+"'><div class='task_view__title'>"+e.title+"</div> Description: "+e.description+", creator: "+e.creator_id+"</div>":""}},{type:"clean",css:"task_action",cols:[{view:"button",autowidth:!0,type:"icon",icon:"mdi mdi-pencil",tooltip:"Edit",css:{"padding-right":"10px"},click:function(){this.$scope.show("m.task.edit?project_id="+u.SB.selId+"&id="+c.SB.selId)}},{view:"button",autowidth:!0,type:"icon",icon:"mdi mdi-attachment",tooltip:"Attachement",css:{"padding-right":"10px"},click:function(){this.$scope.ui(h.TaskAttachScreenshot).show()}},{}]},{height:35,css:"attach_section",cols:[{width:10},{type:"clean",css:"attach_section_label",template:"Attachement",width:90},{type:"clean",view:"template",css:"attach_section_line",template:"<hr>",onClick:{attach_section:function(){console.log("aa")}}},{view:"icon",css:"mdi_fontsize_20 attach_section_icon",icon:"mdi mdi-menu-down"},{width:10}]},{id:v+"file_view_panel",height:100,hidden:!0,cols:[{width:130,id:v+"file_attach_panel",hidden:!0,cols:[{width:10,css:"white_background"},{rows:[{view:"photo",name:"photo",css:"form_photo",id:"form_photo",borderless:!1,width:120,height:65},{view:"button",label:"Upload",css:"webix_primary",click:function(){var e=$$("form_photo").getValue(),t=c.SB.fileNameUpload||(new Date).valueOf()+".png";e=(e=e.replace("data:image/png;base64,","")).replace(" ","+"),(0,c.$o)(u.SB.selId,c.SB.selId,t,e).then((function(e){g().then((function(e){$$(v+"file_attach_panel").hide()}))}))}}]},{width:10,css:"white_background"}]},{id:v+"file_view_empty",css:"white_background"},{view:"dataview",id:v+"file_view",css:"file_view_dataview",height:100,xCount:4,select:!0,hidden:!0,type:{height:100,width:"auto"},template:"<div style='background-image:url("+l.z0+"/data/files/thumbnails/#path#);height:100px;background-repeat:no-repeat;background-position:center;background-size:contain;object-fit: contain;position: relative;'>\n              <div class='item-click' style='width:85%;height:100%;float:left;'></div>\n              <div class='webix_icon mdi mdi-close remove-file-icon' style='float:right;width:5%;height:20px;z-index:1000;padding:10px' title='Delete'></div>\n              </div>\n              ",onClick:{"item-click":function(e,t,n){e.preventDefault(),this.$scope.ui(f.TaskPhotoPreview).show()},"remove-file-icon":function(e,t,n){var i;e.preventDefault(),i=t,webix.confirm({ok:"Yes",cancel:"No",text:"Are you sure to delete ?",callback:function(e){e&&(0,c.Yd)(i).then((function(e){webix.message({text:"File deleted",type:"success"}),g().then((function(e){}))}))}})}}}]},{height:35,css:"comment_section",cols:[{width:10},{type:"clean",css:"comment_section_label",template:"Comments",width:90},{type:"clean",view:"template",css:"comment_section_line",template:"<hr>",onClick:{attach_section:function(){console.log("aa")}}},{view:"icon",css:"mdi_fontsize_20 comment_section_icon",icon:"mdi mdi-menu-down"},{width:10}]},{view:"template",type:"clean",autoheight:!0,id:v+"comment_view_panel",template:function(e){return'<div class=\'comment_textarea_panel\'><textarea class="autosize comment_textarea" placeholder="Type here.."></textarea></div>'}},{padding:10,css:{background:"#fff"},id:v+"comment_submit_panel",hidden:!0,rows:[{cols:[{view:"button",label:"Submit",autowidth:!0,css:"webix_primary",click:function(){var e=$$(v+"comment_view_panel").getNode().querySelector("textarea").value,t=d.SB.dataSelected;0!==Object.keys(t).length&&t.constructor===Object?(0,d.uA)(t.id,e).then((function(e){webix.message({text:"Comment updated",type:"success"}),y(),b(),$$(v+"cancel_edit_comment").hide()})):(0,d.Yr)(c.SB.selId,m.DY.userId,e).then((function(e){webix.message({text:"Comment saved",type:"success"}),y(),b(),$$(v+"cancel_edit_comment").hide()}))}},{view:"button",label:"Cancel",id:v+"cancel_edit_comment",hidden:!0,autowidth:!0,click:function(){d.SB.dataSelected={},$$(v+"comment_view_panel").getNode().querySelector("textarea").value="",this.hide()}},{}]}]},{id:v+"comment_list",view:"template",css:"comment_list",scroll:"y",onClick:{"update-icon":function(e,t,n){var i=parseInt(n.dataset.comment_id),r=d.SB.dataComments.find((function(e){return e.id==i}));d.SB.dataSelected=r;var o=$$(v+"comment_view_panel").getNode(),a=o.querySelector("textarea");a.value=r.comment,a.focus(),$$(v+"cancel_edit_comment").show(),o.classList.add("flash_hightlight_comment"),setTimeout((function(){o.classList.remove("flash_hightlight_comment")}),1e3)},"remove-icon":function(e,t,n){var i;i=parseInt(n.dataset.comment_id),webix.confirm({ok:"Yes",cancel:"No",text:"Are you sure to delete ?",callback:function(e){e&&(0,d.PN)(i).then((function(e){webix.message({text:"Comment deleted",type:"success"}),y(),b()}))}})}}}]}]}},n.init=function(e){},n.urlChange=function(e,t){u.SB.selId=t[0].params.project_id,c.SB.selId=t[0].params.id,c.SB.attachOpen=t[0].params.attach||0,c.SB.attachOpen&&!$$(w+"win")&&e.$scope.ui(h.TaskAttachScreenshot).show()},n.ready=function(){var e=(0,r.Z)(a().mark((function e(t,n){var i,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.SB.selId=n[0].params.project_id,c.SB.selId=n[0].params.id,c.SB.attachOpen=n[0].params.attach||0,e.next=5,(0,c.yW)(c.SB.selId);case 5:return i=e.sent,(r=$$(v+"task_view")).parse(i),r.refresh(),e.next=11,y();case 11:return e.next=13,g();case 13:c.SB.attachOpen&&!$$(w+"win")&&t.$scope.ui(h.TaskAttachScreenshot).show(),(o=document.querySelector(".autosize")).addEventListener("input",(function(){if(o.style.height="40px",o.clientHeight<o.scrollHeight){o.style.height=o.scrollHeight+"px";var e=$$(v+"comment_view_panel");e.config.height=o.scrollHeight,e.resize()}})),$$(v+"comment_view_panel").getNode().querySelector("textarea").addEventListener("keyup",(function(e){e.target.value.trim().length>0?$$(v+"comment_submit_panel").show():$$(v+"comment_submit_panel").hide()}));case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t}(s.iC)},316:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i=n(158).default},905:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var i=n(108),r=n(146),o=n(400),a=n.n(o),s=n(511),c=n(615),u=n(977),l=c.SB.prefix+"_",p=function(e){function t(){return e.apply(this,arguments)||this}(0,r.Z)(t,e);var n=t.prototype;return n.config=function(){var e=this;return{rows:[{view:"toolbar",elements:[{width:10},{view:"icon",icon:"mdi mdi-arrow-left",click:function(){e.show("m.project")}},{view:"label",label:" Task",id:l+"navbar"},{}]},{view:"datatable",id:l+"table",select:"row",header:!1,scrollX:!1,rowHeight:60,fixedRowHeight:!1,rowLineHeight:20,maxRowHeight:60,columns:[{id:"name",template:function(e,t){return"<div class='task_item'><span class='task_item_title'>"+e.title+"</span><br><span class='task_item_desc'>"+e.description+"</span></div>"},fillspace:!0}],on:{onItemClick:function(e){c.SB.selId=e.row,this.$scope.show("/mobile/m.task.detail?project_id="+u.SB.selId+"&id="+e.row)},on:{onAfterLoad:function(){webix.delay((function(){this.adjustRowHeight("name",!0),this.render()}),this)},onColumnResize:function(){this.adjustRowHeight("name",!0),this.render()}}}}]}},n.init=function(e){},n.urlChange=function(e,t){u.SB.selId=t[0].params.project_id},n.ready=function(){var e=(0,i.Z)(a().mark((function e(t,n){var i,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.SB.selId=n[0].params.project_id,e.next=3,(0,u.Rp)(u.SB.selId);case 3:return i=e.sent,$$(l+"navbar").setValue("Task - "+i.name),e.next=8,(0,c.Q_)(u.SB.selId);case 8:r=e.sent,this.$$(l+"table").clearAll(),this.$$(l+"table").parse(r);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t}(s.iC)},959:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(146),r=function(e){function t(){return e.apply(this,arguments)||this}(0,i.Z)(t,e);var n=t.prototype;return n.config=function(){return webix.ui.fullScreen(),{type:"clean",rows:[{$subview:!0},{view:"tabbar",id:"tabbar",type:"bottom",multiview:!0,options:[{value:"<span class='webix_icon mdi mdi-format-list-bulleted'></span>&nbsp;Project",id:"m.project"},{value:"<span class='webix_icon mdi mdi-view-dashboard'></span>&nbsp;Report",id:"m.report"}],height:50,on:{onAfterTabClick:function(e){this.$scope.show("/mobile/"+e)}}}]}},n.init=function(e){},t}(n(511).iC)},761:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ProjectForm:()=>u});var i=n(146),r=n(511),o=n(104),a=n(977),s=a.SB.prefix;function c(){$$(s+"_form").clear(),$$(s+"_win").destructor()}var u=function(e){function t(){return e.apply(this,arguments)||this}(0,i.Z)(t,e);var n=t.prototype;return n.config=function(){return e=a.SB.isEdit,{view:"window",modal:!0,id:s+"_win",position:"center",move:!0,head:{height:38,template:"New Project"},body:{rows:[{padding:10,view:"form",id:s+"_form",width:485,type:"clean",elements:[{view:"text",placeholder:"Project Name",name:"project_name",id:s+"_project_name"}],rules:{project_name:webix.rules.isNotEmpty},on:{onAfterValidation:function(e,t){if(!e){var n=[];for(var i in t)"project_name"==i&&n.push("Project Name can't be empty");webix.message({type:"error",text:n.join("<br>")})}}},elementsConfig:{labelPosition:"left",labelWidth:125,bottomPadding:1}},{view:"toolbar",elements:[{},{view:"button",label:e?"Update":"Save",autowidth:!0,click:function(){var e,t;$$(s+"_form").validate()&&(e=$$(s+"_form").getValues(),t=e.project_name,a.SB.isEdit?webix.ajax().headers((0,o.z)()).put(a.HQ+"/"+data.id,e,(function(e){webix.message({text:"<b>"+t+"</b> updated."}),reload()})).fail((function(e){showError(e)})):webix.ajax().post(a.HQ,e,(function(e){webix.message({text:"<b>"+t+"</b> saved."}),reload()})).fail((function(e){showError(e)})),c())}},{view:"button",value:"Close",autowidth:!0,click:function(){c()}}]}]},on:{onShow:function(){$$(s+"_project_name").focus()}}};var e},n.show=function(e){this.getRoot().show(e)},n.init=function(e){},n.ready=function(e){a.SB.isEdit?loadDataToForm():$$(s+"_form").clear()},t}(r.iC)},740:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var i=n(108),r=n(146),o=n(400),a=n.n(o),s=n(511),c=n(92),u=n(977),l=n(615),p=u.SB+"_page_",d=function(e){function t(){return e.apply(this,arguments)||this}(0,r.Z)(t,e);var n=t.prototype;return n.config=function(){return{rows:[{view:"toolbar",elements:[{view:"button",label:"Create",css:"webix_primary",autowidth:!0,click:function(){this.$scope.show("p.task.add?project_id="+u.SB.selId)}},{view:"text",placeholder:"Search..",value:"status:open",width:400}]},{view:"datatable",id:p+"table",select:"row",columns:[{id:"title",header:["Title",{content:"textFilter"}],width:200},{id:"description",header:["Description",{content:"textFilter"}],fillspace:!0},{id:"creator_name",header:["Created by",{content:"textFilter"}],width:100},{id:"updated_at",header:"Update at",width:150,template:function(e,t){return(0,c.OT)(e.date_modification)}}],on:{onItemClick:function(e){this.$scope.show("/app/p.task?project_id="+u.SB.selId+"&id="+e)}}}]}},n.init=function(e){},n.urlChange=function(){var e=(0,i.Z)(a().mark((function e(t,n){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.SB.selId=n[0].params.project_id,e.next=3,(0,l.Q_)(u.SB.selId);case 3:i=e.sent,this.$$(p+"table").clearAll(),this.$$(p+"table").parse(i);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.ready=function(){var e=(0,i.Z)(a().mark((function e(t,n){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.SB.selId=n[0].params.project_id,e.next=3,(0,l.Q_)(u.SB.selId);case 3:i=e.sent,this.$$(p+"table").clearAll(),this.$$(p+"table").parse(i);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t}(s.iC)},967:(e,t,n)=>{"use strict";n.r(t),n.d(t,{TaskAttachScreenshot:()=>w});var i,r,o=n(146),a=n(108),s=n(400),c=n.n(s),u=n(511),l=n(615),p=l.SB.prefix+"_attachscreen_",d=l.SB.prefix+"_page_",h=!1;function f(){return m.apply(this,arguments)}function m(){return(m=(0,a.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=document.querySelector("#video"),r=document.querySelector("#camera_canvas"),e.next=4,navigator.mediaDevices.getUserMedia({video:{facingMode:h?"user":"environment"},audio:!1});case 4:t=e.sent,i.srcObject=t;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){if(void 0!==i){var e=i.srcObject.getTracks();e.length>0&&e[0].stop()}}var w=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.config=function(){return{view:"window",position:"center",modal:!0,move:!0,id:e=p+"win",width:500,height:400,head:{view:"toolbar",cols:[{width:4},{view:"label",label:"Attach Screenshot"},{view:"icon",icon:"mdi mdi-close",tooltip:"Close Me",align:"right",click:function(){v(),$$(e).close()}}]},body:{rows:[{id:p+"file_tmpl",rows:[{css:"img_screenshot_empty_tmpl",cols:[{view:"uploader",value:"Open file",accept:"image/jpeg, image/png, image/jpg",autosend:!1,multiple:!1,id:p+"_open_uploader",autowidth:!0,upload:l.HQ+"/test",on:{onBeforeFileAdd:function(e){if(e.size&&e.size>4e6)return webix.message({text:"Image too big,  4MB limit size",type:"error"}),!1},onAfterFileAdd:function(t){var n=t.file,i=new FileReader;return i.onload=function(t){var n=document.getElementById("img_screenshot");n.style.backgroundImage="url("+t.target.result+")",n.style.backgroundRepeat="no-repeat",n.style.backgroundPosition="center",n.style.backgroundSize="contain",n.style.width="100%",n.style.height="100%",$$("form_photo").setValue(t.target.result),$$(e).close(),$$(d+"file_view_panel").show(),$$(d+"file_attach_panel").show()},l.SB.fileNameUpload=Object.values($$(p+"_open_uploader").files.data.pull)[0].name,i.readAsDataURL(n),!1}}},{type:"clean",template:'<p id="img_screenshot_empty"> or paste your image below here…</p>'}]},{template:'\n              <img id="img_screenshot"/>\n              '}]},{id:p+"camera_tmpl",hidden:!0,template:'\n          <div class=\'camera_attach_container\'>\n          <video id="video" width="100%" height="100%" autoplay></video>\n          <canvas id="camera_canvas" width="320" height="240"></canvas>\n          <div>\n          '},{cols:[{},{view:"button",type:"icon",icon:"mdi mdi-file",autowidth:!0,tooltip:"Use file",hidden:!0,id:p+"use_file",click:function(){$$(p+"camera_tmpl").hide(),$$(p+"file_tmpl").show(),$$(p+"camera_start").show(),$$(p+"camera_capture").hide(),$$(p+"camera_frontback").hide(),$$(p+"use_file").hide(),v(),this.hide()}},{view:"button",id:p+"camera_start",type:"icon",icon:"mdi mdi-camera",tooltip:"Use Camera",autowidth:!0,click:function(){$$(p+"file_tmpl")&&$$(p+"file_tmpl").hide(),$$(p+"camera_tmpl").show(),$$(p+"camera_capture").show(),$$(p+"camera_frontback").show(),$$(p+"use_file").show(),f(),this.hide()},css:{"padding-left":"10px","padding-right":"10px"}},{view:"button",type:"icon",icon:"mdi mdi-camera-iris",css:"capture_camera",autowidth:!0,tooltip:"Capture Camera",hidden:!0,id:p+"camera_capture",click:function(){!function(){r.getContext("2d").drawImage(i,0,0,r.width,r.height);var e=r.toDataURL("image/png");$$("form_photo").setValue(e),$$(d+"file_view_panel").show(),$$(d+"file_attach_panel").show()}(),$$(e).close()}},{view:"button",type:"icon",icon:"mdi mdi-camera-flip",autowidth:!0,tooltip:"Camera "+(h?"Back":"Front"),hidden:!0,id:p+"camera_frontback",click:function(){h=!h,v(),f()}},{}]}]},on:{onShow:function(){document.onpaste=function(t){var n=t.clipboardData.items[0];if(0===n.type.indexOf("image")){var i=n.getAsFile(),r=new FileReader;r.onload=function(t){document.getElementById("img_screenshot").src=t.target.result,$$("form_photo").setValue(t.target.result),$$(d+"file_view_panel").show(),$$(d+"file_attach_panel").show(),$$(e).close()},r.readAsDataURL(i)}}},onDestruct:function(){v()}}};var e},n.show=function(e){this.getRoot().show(e)},n.init=function(e){},n.ready=function(e){},t}(u.iC)},637:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var i=n(146),r=n(108),o=n(400),a=n.n(o),s=n(511),c=n(615),u=n(977),l=n(724),p=c.SB.prefix;function d(e){var t="p.task.add"==c.SB.routePath?"p.project?project_id="+u.SB.selId:"p.task?project_id="+u.SB.selId+"&id="+c.SB.selId;e.show(t)}function h(){return(h=(0,r.Z)(a().mark((function e(t,n){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$$(p+"_form").getValues(),e.next=3,(0,c.xJ)(n,i.title,i.description);case 3:e.sent&&(webix.message({text:"Task updated",type:"success"}),d(t));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=(0,r.Z)(a().mark((function e(t){var n,i,r,o,s,h;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$$(p+"_form").getValues(),i=u.SB.selId,e.next=4,(0,c.xH)(i);case 4:return r=e.sent,e.next=7,(0,c.vr)(i,r.id,l.DY.userId,n.title,n.description);case 7:if(o=e.sent,!n.photo){e.next=19;break}return s=n.photo,h=Object.values($$(p+"_open_uploader").files.data.pull)[0].name,s=(s=s.replace("data:image/png;base64,","")).replace(" ","+"),e.next=15,(0,c.$o)(u.SB.selId,o,h,s);case 15:e.sent?(webix.message({text:"Task created, uploaded",type:"success"}),d(t)):webix.message({text:"Task fail save, upload",type:"error"}),e.next=20;break;case 19:o?(webix.message({text:"Task created",type:"success"}),d(t)):webix.message({text:"Task fail to save",type:"success"});case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=function(e){function t(){return e.apply(this,arguments)||this}(0,i.Z)(t,e);var n=t.prototype;return n.config=function(){var e=this,t={view:"toolbar",elements:[{width:10},{view:"icon",icon:"mdi mdi-arrow-left",click:function(){d(e)}},{view:"label",label:" Task",id:p+"_navbar"},{}]},n={padding:10,view:"form",id:p+"_form",type:"clean",elements:[{view:"text",label:"Title",name:"title",id:p+"_title"},{view:"textarea",label:"Description",name:"description",id:p+"_description",height:100},{id:p+"form_photo_panel",cols:[{rows:[{css:"photo_panel",rows:[{view:"photo",name:"photo",css:"form_photo",id:"form_photo",borderless:!1,width:120,height:65},{css:"photo_panel_spacer",cols:[{},{view:"uploader",value:"Open file",accept:"image/jpeg, image/png, image/jpg",autosend:!1,multiple:!1,id:p+"_open_uploader",autowidth:!0,upload:c.HQ+"/test",on:{onBeforeFileAdd:function(e){if(e.size&&e.size>4e6)return webix.message({text:"Image too big,  4MB limit size",type:"error"}),!1},onAfterFileAdd:function(e){var t=e.file,n=new FileReader;return n.onload=function(e){$$("form_photo").setValue(e.target.result)},n.readAsDataURL(t),$$(p+"_open_uploader").hide(),$$(p+"_cancel_file").show(),!1}}},{view:"button",value:"Upload",id:p+"_do_uploader",css:"webix_warning",hidden:!0,autowidth:!0,click:function(){var e=$$("form_photo").getValue(),t=Object.values($$(p+"_open_uploader").files.data.pull)[0].name;e=(e=e.replace("data:image/png;base64,","")).replace(" ","+"),(0,c.$o)(u.SB.selId,c.SB.selId,t,e).then((function(e){webix.message({text:"Upload success",type:"success"})}))}},{view:"button",type:"icon",icon:"mdi mdi-close",id:p+"_cancel_file",autowidth:!0,hidden:!0,click:function(){$$("form_photo").setValue(),$$(p+"_open_uploader").show(),this.hide()}},{}]}]}]},{}]},{},{view:"button",label:"Submit",css:"webix_primary",click:function(){"p.task.edit"==c.SB.routePath&&void 0!==c.SB.selId?function(e,t){h.apply(this,arguments)}(this.$scope,c.SB.selId):function(e){f.apply(this,arguments)}(this.$scope)}}],rules:{description:webix.rules.isNotEmpty},on:{onAfterValidation:function(e,t){if(!e){var n=[];for(var i in t)"description"==i&&n.push("Description can't be empty");webix.message({type:"error",text:n.join("<br>")})}}},elementsConfig:{labelPosition:"top",bottomPadding:1}};return{rows:[t,n]}},n.init=function(e){},n.urlChange=function(e,t){c.SB.selId=t[0].params.id,u.SB.selId=t[0].params.project_id},n.ready=function(e,t){var n=this;c.SB.selId=t[0].params.id,u.SB.selId=t[0].params.project_id,c.SB.routePath=t[0].page;var i="";"p.task.add"==c.SB.routePath?(i="Add",$$(p+"form_photo_panel").show()):"p.task.edit"==c.SB.routePath&&void 0!==c.SB.selId?(i="Edit",$$(p+"form_photo_panel").hide(),(0,c.yW)(c.SB.selId).then((function(e){return n.$$(p+"_form").setValues(e)}))):"p.task.editmore"==c.SB.routePath&&(i="Edit more",$$(p+"form_photo_panel").show()),this.$$(p+"_navbar").setValue(i)},t}(s.iC)},599:(e,t,n)=>{"use strict";n.r(t),n.d(t,{TaskPhotoPreview:()=>s});var i=n(146),r=n(511),o=n(615),a=o.SB.prefix+"_img_preview_",s=function(e){function t(){return e.apply(this,arguments)||this}(0,i.Z)(t,e);var n=t.prototype;return n.config=function(){return{view:"window",id:e=a+"win",head:{view:"toolbar",cols:[{width:4},{view:"label",label:"Image View"},{view:"icon",icon:"mdi mdi-close",tooltip:"Close Me",align:"right",click:function(){$$(e).close()}}]},body:{id:"photo_panel_body",rows:[{view:"carousel",id:"carousel",cols:o.SB.imageView,navigation:{type:"side",items:!1},on:{onShow:function(e){}}},{view:"dataview",id:"imageList",css:"nav_list",yCount:1,select:!0,scroll:!1,type:{width:100,height:65},template:o.i3,data:o.SB.images}]},fullscreen:!0,on:{onShow:function(){$$("imageList").select(o.SB.images[0].id)}}};var e},n.show=function(e){this.getRoot().show(e)},n.init=function(e){},n.ready=function(e){$$("imageList").attachEvent("onItemClick",(function(e){$$(e).show()})),$$("carousel").attachEvent("onShow",(function(e){$$("imageList").select(e)}))},t}(r.iC)},870:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i=n(637).default},169:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i=n(637).default},419:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>x});var i=n(146),r=n(108),o=n(400),a=n.n(o),s=n(511),c=n(615),u=n(977),l=n(794),p=n(92),d=n(575),h=n(724),f=n(599),m=n(967),v=c.SB.prefix+"_page_";function w(){return g.apply(this,arguments)}function g(){return(g=(0,r.Z)(a().mark((function e(){var t,n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.dR)(c.SB.selId);case 2:t=e.sent,n=$$(v+"comment_list"),l.SB.dataComments=t,i="",t.forEach((function(e){i+="<div class='comment_list_panel'>"+e.name+" <span style='color:grey'>create at: "+(0,p.OT)(e.date_creation)+" update at: "+(0,p.OT)(e.date_modification)+"</span><br>\n    <div class='comment_list_msg'><span class='comment_msg'>"+e.comment+"</span>\n    <span class='action-icon'>\n      <span class='webix_icon mdi mdi-pencil update-icon' title='Update' data-comment_id="+e.id+"></span>\n      <span class='webix_icon mdi mdi-close remove-icon' title='Delete' data-comment_id="+e.id+"></span>\n    </span>\n    </div>\n    </div>"})),n.setHTML(i),n.scrollTo(0,1e3);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){$$(v+"comment_text").setValue(),l.SB.dataSelected={}}function b(){return y.apply(this,arguments)}function y(){return(y=(0,r.Z)(a().mark((function e(){var t,n,i,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.I2)(c.SB.selId);case 2:if(t=e.sent,n=$$(v+"file_view"),t.length>0){for($$(v+"file_view_empty").hide(),$$(v+"file_view_panel").show(),$$(v+"file_view").show(),n.clearAll(),n.parse(t),c.SB.images=t,i=[],r=0;r<t.length;r++)i.push({id:t[r].id,css:"image",template:c.IY,data:webix.copy(t[r])});c.SB.imageView=i}else $$(v+"file_view_empty").show(),$$(v+"file_view_panel").hide(),$$(v+"file_view").hide();return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=function(e){function t(){return e.apply(this,arguments)||this}(0,i.Z)(t,e);var n=t.prototype;return n.config=function(){var e=this;return{type:"clean",borderless:!0,rows:[{view:"toolbar",css:"nav_toolbar",elements:[{width:10},{view:"icon",icon:"mdi mdi-arrow-left",click:function(){e.show("p.project?project_id="+u.SB.selId)}},{view:"label",label:" Task",id:v+"_navbar"},{}]},{view:"template",id:v+"task_view",autoheight:!0,template:function(e){return 0!==Object.keys(e).length&&e.constructor===Object?"<div class='task_view_template' style='background:"+e.color.background+"'><div class='task_view__title'>"+e.title+"</div> Description: "+e.description+", creator: "+e.creator_id+"</div>":""}},{type:"clean",css:"task_action",cols:[{view:"button",autowidth:!0,type:"icon",icon:"mdi mdi-pencil",tooltip:"Edit",css:{"padding-right":"10px"},click:function(){this.$scope.show("p.task.edit?project_id="+u.SB.selId+"&id="+c.SB.selId)}},{view:"button",autowidth:!0,type:"icon",icon:"mdi mdi-attachment",tooltip:"Attachment",css:{"padding-right":"10px"},click:function(){this.$scope.ui(m.TaskAttachScreenshot).show()}},{}]},{id:v+"file_view_panel",height:100,hidden:!0,cols:[{width:130,id:v+"file_attach_panel",hidden:!0,cols:[{width:10,css:"white_background"},{rows:[{view:"photo",name:"photo",css:"form_photo",id:"form_photo",borderless:!1,width:120,height:65},{view:"button",label:"Upload",css:"webix_primary",click:function(){var e=$$("form_photo").getValue(),t=c.SB.fileNameUpload||(new Date).valueOf()+".png";e=(e=e.replace("data:image/png;base64,","")).replace(" ","+"),(0,c.$o)(u.SB.selId,c.SB.selId,t,e).then((function(e){b().then((function(e){$$(v+"file_attach_panel").hide()}))}))}}]},{width:10,css:"white_background"}]},{id:v+"file_view_empty",css:"white_background"},{view:"dataview",id:v+"file_view",height:100,xCount:4,select:!0,hidden:!0,type:{height:100,width:"auto"},template:"<div style='background-image:url("+d.z0+"/data/files/thumbnails/#path#);height:100px;background-repeat:no-repeat;background-position:center;background-size:contain;object-fit: contain;position: relative;'>\n              <div class='item-click' style='width:85%;height:100%;float:left;'></div>\n              <div class='webix_icon mdi mdi-close remove-file-icon' style='float:right;width:5%;height:20px;z-index:1000;padding:10px' title='Delete'></div>\n              </div>\n              ",onClick:{"item-click":function(e,t,n){e.preventDefault(),this.$scope.ui(f.TaskPhotoPreview).show()},"remove-file-icon":function(e,t,n){var i;e.preventDefault(),i=t,webix.confirm({ok:"Yes",cancel:"No",text:"Are you sure to delete ?",callback:function(e){e&&(0,c.Yd)(i).then((function(e){webix.message({text:"File deleted",type:"success"}),b().then((function(e){}))}))}})}}}]},{view:"template",template:"Comments",type:"section",css:{background:"#fff"}},{padding:10,css:{background:"#fff"},rows:[{view:"textarea",id:v+"comment_text",height:100,css:"testx"},{cols:[{view:"button",label:"Submit",autowidth:!0,css:"webix_primary",click:function(){$$(v+"comment_list");var e=l.SB.dataSelected;0!==Object.keys(e).length&&e.constructor===Object?(0,l.uA)(e.id,$$(v+"comment_text").getValue()).then((function(e){webix.message({text:"Comment updated",type:"success"}),w(),_(),$$(v+"cancel_edit_comment").hide()})):(0,l.Yr)(c.SB.selId,h.DY.userId,$$(v+"comment_text").getValue()).then((function(e){webix.message({text:"Comment saved",type:"success"}),w(),_(),$$(v+"cancel_edit_comment").hide()}))}},{view:"button",label:"Cancel",id:v+"cancel_edit_comment",hidden:!0,autowidth:!0,click:function(){l.SB.dataSelected={},$$(v+"comment_text").setValue(),this.hide()}},{}]},{height:20}]},{id:v+"comment_list",view:"template",css:"comment_list",scroll:"y",onClick:{"update-icon":function(e,t,n){var i=parseInt(n.dataset.comment_id),r=l.SB.dataComments.find((function(e){return e.id==i}));l.SB.dataSelected=r;var o=$$(v+"comment_text");o.setValue(r.comment),o.focus(),$$(v+"cancel_edit_comment").show(),webix.html.addCss(o.getNode(),"flash_hightlight_comment"),setTimeout((function(){webix.html.removeCss(o.$view,"flash_hightlight_comment")}),1e3)},"remove-icon":function(e,t,n){var i;i=parseInt(n.dataset.comment_id),webix.confirm({ok:"Yes",cancel:"No",text:"Are you sure to delete ?",callback:function(e){e&&(0,l.PN)(i).then((function(e){webix.message({text:"Comment deleted",type:"success"}),w(),_()}))}})}}}]}},n.urlChange=function(e,t){c.SB.selId=t[0].params.id,u.SB.selId=t[0].params.project_id},n.ready=function(){var e=(0,r.Z)(a().mark((function e(t,n){var i,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.SB.selId=n[0].params.id,u.SB.selId=n[0].params.project_id,e.next=4,(0,u.Rp)(u.SB.selId);case 4:return i=e.sent,e.next=7,(0,c.yW)(c.SB.selId);case 7:return r=e.sent,o=this.$$(v+"task_view"),this.$$(v+"_navbar").setValue(i.name),o.parse(r),o.refresh(),e.next=14,w();case 14:return e.next=16,b();case 16:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.destructor=function(){l.SB.dataComments=[],l.SB.dataSelected={},c.SB.fileNameUpload=""},t}(s.iC)},491:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c,ProfileWindow:()=>u});var i=n(146),r=n(511),o=n(575),a=n(104),s=n(724),c=function(e){function t(){return e.apply(this,arguments)||this}(0,i.Z)(t,e);var n=t.prototype;return n.config=function(){var e=this;return{rows:[{view:"button",label:"User info",click:function(){webix.ajax().headers((0,a.z)()).get(o.T5+"/user/profile").then((function(e){e.json()}))}},{view:"button",label:"Check status",click:function(){webix.ajax().headers((0,a.z)()).post(o.T5+"/user/status").then((function(e){e.json()}))}},{view:"button",label:"Logout",click:function(){e.app.getService("user").logout().then((function(t){t&&e.show("/logout")}))}}]}},n.init=function(e){},t}(r.iC),u=function(e){function t(){return e.apply(this,arguments)||this}(0,i.Z)(t,e);var n=t.prototype;return n.config=function(){var e=this,t=this;return{view:"window",modal:!0,position:"center",move:!0,close:!0,head:"Profile",body:{rows:[{view:"form",width:400,padding:10,type:"clean",elements:[{view:"text",name:"username",value:s.DY.username+" ("+s.DY.username+")",readonly:!0}]},{cols:[{},{view:"button",label:"Logout",css:"webix_danger",click:function(){t.app.getService("user").logout().then((function(t){t&&e.app.show("/logout")}))}},{}]}]}}},n.show=function(e){this.getRoot().show(e)},n.init=function(e){},n.ready=function(e){},t}(r.iC)},153:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i={template:"\n\t<h4>TODO:</h4>\n\t<ul>\n\t\t<li>login mobile view</li>\n\t\t<li>detech auto switch mobile mode</li>\n\t\t<li>theme navbar</li>\n\t\t<li>setting page</li>\n\t\t<li>report page temp</li>\n\t\t<li>async loading</li>\n\t</ul>\n\t"}},87:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>h,ProfileWindow:()=>f});var i=n(146),r=n(108),o=n(400),a=n.n(o),s=n(511),c=n(575),u=(n(724),window.btoa("arifin2:arifin123"));function l(){return webix.ajax().headers({"Content-Type":"application/json",Authorization:"Basic "+u}).post(c.T5,{jsonrpc:"2.0",method:"getMe",id:1718627783}).then((function(e){return e.json().result}))}function p(e,t,n){var i={jsonrpc:"2.0",method:"createComment",id:1580417921,params:{task_id:e,user_id:t,content:n}};return webix.ajax().headers({"Content-Type":"application/json",Authorization:"Basic "+u}).post(c.T5,i).then((function(e){return e.json().result[0]}))}function d(){return(d=(0,r.Z)(a().mark((function e(t,n){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:i=e.sent,p(t,i.id,n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=function(e){function t(){return e.apply(this,arguments)||this}(0,i.Z)(t,e);var n=t.prototype;return n.config=function(){var e,t,n=this;return{rows:[{view:"button",label:"Get ME",click:(t=(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:e.sent;case 3:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{view:"button",label:"Get Projects",click:function(){webix.ajax().headers({"Content-Type":"application/json",Authorization:"Basic "+u}).post(c.T5,{jsonrpc:"2.0",method:"getmyProjects",id:2134420212}).then((function(e){}))}},{view:"button",label:"Get Project by id=3",click:function(){webix.ajax().headers({"Content-Type":"application/json",Authorization:"Basic "+u}).post(c.T5,{jsonrpc:"2.0",method:"getProjectById",id:226760253,params:{project_id:3}}).then((function(e){}))}},{view:"button",label:"Get colum by project id=3",click:function(){webix.ajax().headers({"Content-Type":"application/json",Authorization:"Basic "+u}).post(c.T5,{jsonrpc:"2.0",method:"getColumns",id:887036325,params:[3]}).then((function(e){}))}},{view:"button",label:"Crate task by project id=3",click:function(){var e;(e={jsonrpc:"2.0",method:"getColumns",id:887036325,params:[3]},webix.ajax().headers({"Content-Type":"application/json",Authorization:"Basic "+u}).post(c.T5,e).then((function(e){return e.json().result[0]}))).then((function(e){var t,n;t=e.id,n={jsonrpc:"2.0",method:"createTask",id:1176509098,params:{owner_id:3,creator_id:3,date_due:"",description:"gggg",category_id:0,score:0,title:"ggg",project_id:3,color_id:"green",column_id:t,recurrence_status:0,recurrence_trigger:0,recurrence_factor:0,recurrence_timeframe:0,recurrence_basedate:0}},webix.ajax().headers({"Content-Type":"application/json",Authorization:"Basic "+u}).post(c.T5,n).then((function(e){}))}))}},{view:"button",label:"Crate comment by task id=6",click:function(){!function(e,t){d.apply(this,arguments)}(6,"hello test aja1")}},{view:"button",label:"Get all comments by task id=6",click:(e=(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t=void 0,t={jsonrpc:"2.0",method:"getAllComments",id:148484683,params:{task_id:6}},webix.ajax().headers({"Content-Type":"application/json",Authorization:"Basic "+u}).post(c.T5,t).then((function(e){return e.json().result}));case 3:e.sent;case 4:case"end":return e.stop()}var t}),e)}))),function(){return e.apply(this,arguments)})},{view:"button",label:"Logout",click:function(){n.app.getService("user").logout().then((function(e){e&&n.show("/logout")}))}}]}},n.init=function(e){},t}(s.iC),f=function(e){function t(){return e.apply(this,arguments)||this}(0,i.Z)(t,e);var n=t.prototype;return n.config=function(){var e=this,t=this;return{view:"window",modal:!0,position:"center",move:!0,close:!0,head:"Profile",body:{rows:[{view:"form",width:400,padding:10,type:"clean",elements:[{view:"text",label:"Username",name:"username",value:"Dummy User",readonly:!0}]},{cols:[{},{view:"button",label:"Logout",css:"webix_danger",click:function(){t.app.getService("user").logout().then((function(t){t&&e.app.show("/logout")}))}},{}]}]}}},n.show=function(e){this.getRoot().show(e)},n.init=function(e){},n.ready=function(e){},t}(s.iC)},796:(e,t,n)=>{var i={"./en":194,"./en.js":194};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id=796},403:(e,t,n)=>{var i={"./app":469,"./app.js":469,"./login":401,"./login.js":401,"./m/project":636,"./m/project/":636,"./m/project/ProjectForm":350,"./m/project/ProjectForm.js":350,"./m/project/index":636,"./m/project/index.js":636,"./m/report":974,"./m/report/":974,"./m/report/index":974,"./m/report/index.js":974,"./m/task":905,"./m/task/":905,"./m/task/TaskAttachScreenshot":51,"./m/task/TaskAttachScreenshot.js":51,"./m/task/TaskForm":158,"./m/task/TaskForm.js":158,"./m/task/TaskPhotoPreview":962,"./m/task/TaskPhotoPreview.js":962,"./m/task/add":402,"./m/task/add.js":402,"./m/task/detail":939,"./m/task/detail.js":939,"./m/task/edit":316,"./m/task/edit.js":316,"./m/task/index":905,"./m/task/index.js":905,"./mobile":959,"./mobile.js":959,"./p/project":740,"./p/project/":740,"./p/project/ProjectForm":761,"./p/project/ProjectForm.js":761,"./p/project/index":740,"./p/project/index.js":740,"./p/task":419,"./p/task/":419,"./p/task/TaskAttachScreenshot":967,"./p/task/TaskAttachScreenshot.js":967,"./p/task/TaskForm":637,"./p/task/TaskForm.js":637,"./p/task/TaskPhotoPreview":599,"./p/task/TaskPhotoPreview.js":599,"./p/task/add":870,"./p/task/add.js":870,"./p/task/edit":169,"./p/task/edit.js":169,"./p/task/index":419,"./p/task/index.js":419,"./profile":491,"./profile.js":491,"./start":153,"./start.js":153,"./test":87,"./test.js":87};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id=403},108:(e,t,n)=>{"use strict";function i(e,t,n,i,r,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(i,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)}))}}n.d(t,{Z:()=>r})},146:(e,t,n)=>{"use strict";function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}n.d(t,{Z:()=>r})}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var t=n(146),i=n(511),r=n(603),o=(n(724),n(92));function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?a(Object(i),!0).forEach((function(n){e(t,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}webix.protoUI({name:"photo",$allowsClear:!0,defaults:{width:360,height:260,template:function(e,t){return t.$view.style.backgroundImage="url("+e.src+")",t.$view.style.backgroundRepeat="no-repeat",t.$view.style.backgroundPosition="center",t.$view.style.backgroundSize="contain",""}},$init:function(e){e.value&&this.$ready.push((function(){this.setValue(e.value)}))},getValue:function(){var e=this.getValues();return e?e.src:null},setValue:function(e){this.setValues({src:e})}},webix.ui.template);var c=function(e){function n(t){var n;console.log("getScreenSize()",(0,o.tE)());var a={id:"zboard",version:"1.1.0",router:i.UT,debug:!1,start:"wide"==(0,o.tE)()?"/app/start":"/mobile/start"};return(n=e.call(this,s(s({},a),t))||this).use(i.Gr.User,{model:r.Z,afterLogin:"wide"==(0,o.tE)()?"/app/start":"/mobile/start"}),n}return(0,t.Z)(n,e),n}(i.Dd);webix.ready((function(){(new c).render()}))})()})();